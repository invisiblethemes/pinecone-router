const t={routes:[],isLocation:!(!window.history.location&&!window.location),notfound:function(){console.log("Alpine Router: not found")},start(){if(!window.Alpine)throw new Error("Alpine is require for `Alpine Router` to work.");Alpine.onComponentInitialized(t=>{t.$el.hasAttribute("x-router")&&Array.from(t.$el.children).forEach(e=>{e.hasAttribute("x-route")&&this.processRoute(e,t)})}),document.querySelectorAll("a").forEach(t=>{for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var e="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var o=t.getAttribute("href");o&&o.indexOf("mailto:")>-1||(e?t.target.baseVal:t.target)||(e||this.sameOrigin(t.href))&&t.addEventListener("click",t=>{t.preventDefault(),this.navigate(t.target.getAttribute("href"))},!1)}}}),window.addEventListener("popstate",t=>router.navigate(t.detail)),this.navigate(location.pathname+location.hash)},processRoute(t,o){if("template"!==t.tagName.toLowerCase())throw new Error("Alpine Router: x-routes must be used on a template tag.");if(0==t.hasAttribute("x-handler"))throw new Error('Alpine Router: x-route must have a handler (x-handler="handler")');let r=t.getAttribute("x-route"),n=t.getAttribute("x-handler"),i=o.getUnobservedData()[n];"notfound"==r?this.notfound=i:this.routes.push(new e(r,i))},match(t,e){let o=[],r=t.path.replace(/([:*])(\w+)/g,(t,e,r)=>(o.push(r),"([^/]+)"))+"(?:/|$)",n={},i=e.match(new RegExp(r));return null!==i&&(n=i.slice(1).reduce((t,e,r)=>(null===t&&(t={}),t[o[r]]=e,t),null)),t.setProps(n),i},navigate(t){const e=this.routes.filter(e=>this.match(e,t))[0];e?(history.pushState({},"",t),e.handle()):this.notfound()},_toURL(t){if("function"==typeof URL&&this.isLocation)return new URL(t,window.location.toString());var e=window.document.createElement("a");return e.href=t,e},sameOrigin(t){if(!t||!this.isLocation)return!1;var e=this._toURL(t),o=window.location;return o.protocol===e.protocol&&o.hostname===e.hostname&&(o.port===e.port||""===o.port&&(80==e.port||443==e.port))},_samePath(t){if(!this.isLocation)return!1;var e=window.location;return t.pathname===e.pathname&&t.search===e.search}};class e{constructor(t,e){this.path=t,this.handler=e}setProps(t){this.props=t}handle(){return this.handler(this.props)}}const o=window.deferLoadingAlpine||(t=>t());window.AlpineRouter=t,window.deferLoadingAlpine=function(t){window.AlpineRouter.start(),o(t)},module.exports=t;
//# sourceMappingURL=alpine-router.js.map
